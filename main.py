from aiogram import types, Router, Ffrom aiogram.filters import CommandStart, Commandfrom aiogram.fsm.context import FSMContextfrom buttons.user import start_menu_btfrom loader import User, _, Essentialsfrom utils.additions import MESSAGE_EFFECTS# from views.admin.detailed_adm_hl import detailed_clfrom utils.validator import message_deleterfrom views.user.login_hl import create_user_frouter = Router()@router.message(CommandStart())async def start_command_f(message: types.Message, state: FSMContext=FSMContext, u=None, delete=False):    accept = True    if message.text:        parts = message.text.split(' ')        hidden_code = parts[-1] if len(parts) > 1 else None        if hidden_code and hidden_code.startswith('movie_'):            # idn = hidden_code.split('_')[1]            accept = False            # await detailed_cl(call=message, idn=idn)    if accept:        u = u or message.from_user        lang = u.language_code        try:            await state.clear()        except Exception:            pass        u_d = await User.get_data(u.id)        if u_d:            if delete:                await message_deleter(u_id=u.id, message_id=message.message_id)            text = ("Assalamu Alaykum\n"+                    _("Welcome to Marstiff's official bot.")+ "\n" +                    _("Choose")+" üëá")            markup = await start_menu_bt(u=u_d or u, lang=lang)            try:                await message.edit_text(                    text=text,                    reply_markup=markup,                    parse_mode='HTML'                )            except Exception:                await message.answer(                    text=text,                    reply_markup=markup,                    parse_mode='HTML'                )            await u_d.use()        else:            await create_user_f(mess=message, state=state, u=u)@router.callback_query(F.data=='home')async def start_command_caller_f(call: types.CallbackQuery, state: FSMContext):    await start_command_f(message=call.message, state=state, u=call.from_user)@router.message(F.text == "‚óÄÔ∏è Back")async def start_command_caller2_f(message: types.Message, state: FSMContext):    await start_command_f(message=message, state=state, u=message.from_user)@router.message(Command("help"))async def help_command(mess: types.Message, state: FSMContext):    await state.clear()    data = await Essentials.get_by_key(key="support")    await mess.answer(        text=f"Don't be afraidüòâ \n"             f"Support is here: {data.val}",        message_effect_id=MESSAGE_EFFECTS["‚ù§Ô∏è"]    )